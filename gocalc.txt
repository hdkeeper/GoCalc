Доска = состоит из:
- двумерный массив (x, y) из ссылок на позиции
- список ссылок на все группы камней
- ссылка на доску в предущей позиции
- список ссылок на доски в последующих позициях

Позиция = состоит из:
- Цвет (нет, белый, черный)
- Ссылка на группу камней
- Номер хода (0, 1, 2, ...)

Группа камней = состоит из:
- Цвет (белый, черный)
- Количество камней
- Количество дамэ
- Список позиций (x, y) камней

Операция добавления камня (x, y) на доску:
- создаем новую доску
- переписываем в нее ссылки на позиции из предыдущей доски
- переписываем в нее ссылки на группы камней из предыдущей доски
- заменяем ссылку на позицию (x, y) на новую позицию с новым камнем
- Куда добавляется камень?
  - Если образует новую группу камней:
    - создаем новую группу с одним камнем
    - заносим ссылку на неё в список групп
    - заносим ссылку на неё в массиве позиций
  - Если к существующей группе камней:
    - создаем копию этой группы
    - добавляем в неё камень
    - заменяем ссылку на неё в списке групп
    - заменяем все ссылки в массиве позиций на ссылку на новую группу
- пересчитываем дамэ у новой группы и у всех соседних для позиции (x, y)





